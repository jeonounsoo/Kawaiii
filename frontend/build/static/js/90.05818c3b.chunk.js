"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[90],{6958:function(e,t,a){a.r(t);var r=a(4165),n=a(5861),i=a(885),s=a(2791),l=a(4880),d=(a(8055),a(2810)),u=a(3407),o=a(3999),c=a(5094),p=a(9508),f=a(6986),v=a(1828),x=a(3108),h=a(7212),m=a(184);t.default=function(){var e=(0,s.useContext)(x.V),t=(0,p.x)(),a=t.isLoading,g=t.error,j=t.sendRequest,Z=t.clearError,b=(0,c.c)({title:{value:"",isValid:!1},description:{value:"",isValid:!1},address:{value:"",isValid:!1},image:{value:null,isValid:!1}},!1),k=(0,i.Z)(b,2),P=k[0],y=k[1],C=(0,l.useHistory)(),w=function(){var t=(0,n.Z)((0,r.Z)().mark((function t(a){var n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,(n=new FormData).append("title",P.inputs.title.value),n.append("description",P.inputs.description.value),n.append("address",P.inputs.address.value),n.append("image",P.inputs.image.value),t.next=9,j("http://localhost:5000/api/places","POST",n,{Authorization:"Bearer "+e.token});case 9:C.push("/"),t.next=14;break;case 12:t.prev=12,t.t0=t.catch(1);case 14:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}();return(0,m.jsxs)(s.Fragment,{children:[(0,m.jsx)(f.Z,{error:g,onClear:Z}),(0,m.jsxs)("form",{className:"place-form",onSubmit:w,children:[a&&(0,m.jsx)(v.Z,{asOverlay:!0}),(0,m.jsx)(d.Z,{id:"title",element:"input",type:"text",label:"Title",validators:[(0,u.hg)()],errorText:"Please enter a valid title.",onInput:y}),(0,m.jsx)(d.Z,{id:"description",element:"textarea",label:"Description",validators:[(0,u.CP)(5)],errorText:"Please enter a valid description (at least 5 characters).",onInput:y}),(0,m.jsx)(d.Z,{id:"address",element:"input",label:"Address",validators:[(0,u.hg)()],errorText:"Please enter a valid address.",onInput:y}),(0,m.jsx)(h.Z,{id:"image",onInput:y,errorText:"Please provide an image."}),(0,m.jsx)(o.Z,{type:"submit",disabled:!P.isValid,children:"ADD PLACE"})]})]})}},7212:function(e,t,a){a.d(t,{Z:function(){return l}});var r=a(885),n=a(2791),i=a(3999),s=a(184),l=function(e){var t=(0,n.useState)(),a=(0,r.Z)(t,2),l=a[0],d=a[1],u=(0,n.useState)(),o=(0,r.Z)(u,2),c=o[0],p=o[1],f=(0,n.useState)(!1),v=(0,r.Z)(f,2),x=v[0],h=v[1],m=(0,n.useRef)();(0,n.useEffect)((function(){if(l){var e=new FileReader;e.onload=function(){p(e.result)},e.readAsDataURL(l)}}),[l]);return(0,s.jsxs)("div",{className:"form-control",children:[(0,s.jsx)("input",{id:e.id,ref:m,style:{display:"none"},type:"file",accept:".jpg,.png,.jpeg,.gif",onChange:function(t){var a,r=x;t.target.files&&1===t.target.files.length?(a=t.target.files[0],d(a),h(!0),r=!0):(h(!1),r=!1),e.onInput(e.id,a,r)}}),(0,s.jsxs)("div",{className:"image-upload ".concat(e.center&&"center"),children:[(0,s.jsxs)("div",{className:"image-upload__preview",children:[c&&(0,s.jsx)("img",{src:c,alt:"Preview"}),!c&&(0,s.jsx)("p",{children:"Please pick an image."})]}),(0,s.jsx)(i.Z,{type:"button",onClick:function(){m.current.click()},children:"PICK IMAGE"})]}),!x&&(0,s.jsx)("p",{children:e.errorText})]})}},8055:function(){}}]);
//# sourceMappingURL=90.05818c3b.chunk.js.map